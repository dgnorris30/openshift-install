---
- name: vim et al is installed
  import_playbook: packages.yml

- name: puppet and prometheus exporters are disabled
  import_playbook: disable_puppet.yml

- name: haproxy is installed on loadbalancer nodes
  import_playbook: xx_haproxy_install.yml

- name: docker bridge ip is on non-default network
  import_playbook: docker_networking.yml

- name: nfs mount for rsyncing files from master
  hosts:
    - common-sys-dev1-master-1.ris.wustl.edu
  gather_facts: no
  tasks:
    - name: playbook dirs pushed to bastion
      synchronize:
        src: ../{{ item }}
        dest: /usr/share/ansible/openshift-ansible/
        rsync_opts:
          - --exclude-from=./files/.rsyncignore
      loop:
        - openshift-install
        - facts
      tags:
        - sync-pb-push
    - name: playbook dirs pulled from bastion
      synchronize:
        src: /usr/share/ansible/openshift-ansible/{{ item }}/
        dest: ../{{ item }}/
        mode: pull
        rsync_opts:
          - --exclude-from=./files/.rsyncignore
      loop:
        - openshift-install
      tags:
        - sync-pb-pull
